{"version":3,"sources":["views/Referrals/index.tsx"],"names":["Hero","styled","div","Title","Content","Row","ReferralLink","Button","LeftWrapper","Table","TableHeader","HeaderCellL","HeaderCellR","Snackbar","ReferralRewardsDiv","data","referralsCount","totalReferralCommissions","DECIMAL_PLACES","BigNumber","pow","account","useWallet","useState","toastMessage","setToastMessage","referralURL","substring","toastOpen","ToastPopup","message","x","document","getElementById","classList","add","setTimeout","className","replace","ReferralRewards","masterChefContract","useMasterchef","setData","useEffect","a","address","methods","call","totalReferralCommissionsBigNumber","toString","fetchData","id","onClick","navigator","clipboard","writeText","error1","dummy","createElement","body","appendChild","value","select","execCommand","removeChild","error2"],"mappings":"y4HAQA,IAAMA,EAAOC,IAAOC,IAAV,KAeJC,EAAQF,IAAOC,IAAV,KA0BLE,EAAUH,IAAOC,IAAV,KAOPG,EAAMJ,IAAOC,IAAV,KAQHI,EAAeL,IAAOC,IAAV,KAKZK,EAASN,IAAOC,IAAV,KAgCNM,EAAcP,IAAOC,IAAV,KAMXO,EAAQR,IAAOC,IAAV,KASLQ,EAAcT,IAAOC,IAAV,KAQXS,EAAcV,IAAOC,IAAV,KASXU,EAAcX,IAAOC,IAAV,KAQXW,EAAWZ,IAAOC,IAAV,KAmDRY,EAAqB,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAC5B,OACE,cAACP,EAAD,UACE,eAACC,EAAD,WACE,eAACC,EAAD,WACE,cAACC,EAAD,6BACA,cAACC,EAAD,UAAeG,EAAKC,oBAEtB,eAACN,EAAD,WACE,cAACC,EAAD,4BACA,cAACC,EAAD,UAAeG,EAAKE,oCAOf,qBACb,IAAMC,EAAiB,IAAIC,IAAU,IAAIC,IAAI,IACrCC,EAAYC,cAAZD,QAFW,EAGuBE,mBAAS,IAHhC,mBAGXC,EAHW,KAGGC,EAHH,KAIbC,EAAeL,EAAO,wCAAoCA,EAAQM,UAAU,IAAO,KACrFC,GAAY,EAEhB,SAASC,EAAWC,GAClB,IAAIF,EAAJ,CACAA,GAAY,EACZH,EAAgBK,GAEhB,IAAMC,EAAIC,SAASC,eAAe,YAClCF,EAAEG,UAAUC,IAAI,QAEhBC,YAAW,WACTL,EAAEM,UAAYN,EAAEM,UAAUC,QAAQ,OAAQ,IAE1CF,YAAW,WACTR,GAAY,IACX,OACF,MAeL,IAAMW,EAAkB,WACtB,IAAMC,EAAqBC,cADC,EAEJlB,mBAAS,IAFL,mBAErBR,EAFqB,KAEf2B,EAFe,KAoB5B,OAhBAC,qBAAU,WAAM,4CACd,kCAAAC,EAAA,6DACQC,EAAWxB,GAAW,6CAD9B,SAE+BmB,EAAmBM,QAAQ9B,eAAe6B,GAASE,OAFlF,cAEQ/B,EAFR,YAGgDG,IAHhD,SAGgEqB,EAAmBM,QAAQ7B,yBAAyB4B,GAASE,OAH7H,mBAGQC,EAHR,eAIQ/B,EAA2B+B,EAAkC9C,IAAIgB,GAAgB+B,WAEvFP,EAAQ,CACN1B,iBACAC,6BARJ,6CADc,uBAAC,WAAD,wBAadiC,KACC,CAACV,IAEG,cAAC1B,EAAD,CAAoBC,KAAMA,KAuBnC,OACE,eAAC,IAAD,WACE,cAACF,EAAD,CAAUsC,GAAG,WAAWC,QAzD5B,WACE,IAAMrB,EAAIC,SAASC,eAAe,YAElCG,YAAW,WACTL,EAAEM,UAAYN,EAAEM,UAAUC,QAAQ,OAAQ,IAE1CF,YAAW,WACTR,GAAY,IACX,OACF,MAgDD,SAAqDJ,IAErD,cAACxB,EAAD,UACE,eAACG,EAAD,WACE,yCACA,iDAIc,OAAhBuB,EACA,cAACtB,EAAD,UACE,cAACC,EAAD,+DAGF,eAACD,EAAD,WACE,cAACC,EAAD,iFAEA,cAACG,EAAD,UACE,eAACH,EAAD,WACE,cAACE,EAAD,CAAQ6C,QAzCJ,WACd,IACEC,UAAUC,UAAUC,UAAU7B,GAC9BG,EAAW,wCACX,MAAO2B,GACP,IACE,IAAMC,EAAQzB,SAAS0B,cAAc,YACrC1B,SAAS2B,KAAKC,YAAYH,GAC1BA,EAAMI,MAAQnC,EACd+B,EAAMK,SACN9B,SAAS+B,YAAY,QACrB/B,SAAS2B,KAAKK,YAAYP,GAE1B5B,EAAW,wCACX,MAAOoC,GACPpC,EAAW,4DA0BL,kBACA,cAACvB,EAAD,UAAeoB,SAInB,cAACa,EAAD","file":"static/js/18.1d898451.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useMasterchef } from \"hooks/useContract\";\nimport styled from \"styled-components\";\nimport Page from \"components/layout/Page\";\nimport BigNumber from \"bignumber.js\";\nimport { useWallet } from \"@binance-chain/bsc-use-wallet\";\n// import { useFetchPublicData } from \"state/hooks\";\n\nconst Hero = styled.div`\n  align-items: center;\n  /* background-image: url('/images/banner-runitup.png'); */\n  background-repeat: no-repeat;\n  background-position: top center;\n  background-size: contain;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  margin: auto;\n  margin-bottom: 32px;\n  min-height: 116px;\n  text-align: center;\n`;\n\nconst Title = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  font-size: 32px;\n  font-weight: bold;\n  color: white;\n\n  div {\n    display: flex;\n  }\n`;\n\n// const Subtitle = styled.div`\n//   display: flex;\n//   flex-direction: column;\n//   margin-bottom: 16px;\n//   color: white;\n// `;\n\n// const Header = styled.div`\n//   border-bottom: 3px dashed ${({ theme }) => theme.colors.textSubtle};\n//   margin-bottom: 20px;\n//   padding-bottom: 20px;\n// `;\n\nconst Content = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  flex-direction: column;\n  align-items: flex-start;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 16px;\n  font-size: 32px;\n  color: white;\n`;\n\nconst ReferralLink = styled.div`\n  display: flex;\n  font-size: 16px;\n`;\n\nconst Button = styled.div`\n  padding: 0;\n  color: white;\n  width: 64px;\n  height: 32px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: darkred;\n  border: 1px solid white;\n  user-select: none;\n  -ms-user-select: none;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  border-radius: 0;\n  text-align: center;\n  line-height: 28px;\n  margin-right: 8px;\n\n  :hover {\n    opacity: 0.85;\n  }\n\n  :active {\n    -webkit-transform: translateY(1px);\n    -ms-transform: translateY(1px);\n    transform: translateY(1px);\n    box-shadow: none;\n  }\n`;\n\nconst LeftWrapper = styled.div`\n  display: flex;\n  justify-content: left;\n  width: 100%;\n`;\n\nconst Table = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n  color: white;\n  border: 1px solid red;\n  border-radius: 0;\n`;\n\nconst TableHeader = styled.div`\n  display: flex;\n  height: 48px;\n  padding: 0 8px;\n  font-size: 24px;\n  border-bottom: 1px solid red;\n`;\n\nconst HeaderCellL = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding-right: 8px;\n  border-right: 1px solid red;\n  justify-content: center;\n`;\n\nconst HeaderCellR = styled.div`\n  display: flex;\n  width: 100%;\n  align-items: center;\n  padding-left: 8px;\n  justify-content: center;\n`;\n\nconst Snackbar = styled.div`\n  visibility: hidden;\n  min-width: 250px;\n  margin-left: -125px;\n  background-color: #333333;\n  color: #23e200; /* #ff6e6e */\n  text-align: center;\n  border-radius: 4px;\n  padding: 16px;\n  position: fixed;\n  z-index: 1;\n  top: 0%;\n  right: 16px;\n  border: 1px solid yellow;\n  cursor: pointer;\n  user-select: none;\n  -ms-user-select: none;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n\n  &.show {\n    visibility: visible;\n    -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;\n    animation: fadein 0.5s, fadeout 0.5s 2.5s;\n  }\n\n  @-webkit-keyframes fadein {\n    from {right: 0; opacity: 0;}\n    to {right: 16px; opacity: 1;}\n  }\n\n  @keyframes fadein {\n    from {right: 0; opacity: 0;}\n    to {right: 16px; opacity: 1;}\n  }\n\n  @-webkit-keyframes fadeout {\n    from {right: 16px; opacity: 1;}\n    to {right: 0; opacity: 0;}\n  }\n\n  @keyframes fadeout {\n    from {right: 16px; opacity: 1;}\n    to {right: 0; opacity: 0;}\n  }\n`;\n\n// left: 50%;\n// bottom: 30px;\n\nconst ReferralRewardsDiv = ({ data }) => {\n  return (\n    <LeftWrapper>\n      <Table>\n        <TableHeader>\n          <HeaderCellL>Referral Count</HeaderCellL>\n          <HeaderCellR>{ data.referralsCount }</HeaderCellR>\n        </TableHeader>\n        <TableHeader>\n          <HeaderCellL>UPWARD Earned</HeaderCellL>\n          <HeaderCellR>{ data.totalReferralCommissions }</HeaderCellR>\n        </TableHeader>\n      </Table>\n    </LeftWrapper>\n  );\n};\n\nexport default () => {\n  const DECIMAL_PLACES = new BigNumber(10).pow(18);\n  const { account } = useWallet();\n  const [ toastMessage, setToastMessage ] = useState(\"\");\n  const referralURL = (account ? `https://runitup.finance?refer=${account.substring(2)}` : null);\n  let toastOpen = false;\n\n  function ToastPopup(message) {\n    if (toastOpen) return;\n    toastOpen = true;\n    setToastMessage(message);\n\n    const x = document.getElementById(\"snackbar\");\n    x.classList.add(\"show\");\n\n    setTimeout(() => {\n      x.className = x.className.replace(\"show\", \"\");\n\n      setTimeout(() => {\n        toastOpen = false;\n      }, 600);\n    }, 3000);\n  }\n\n  function ToastPopupClicked() {\n    const x = document.getElementById(\"snackbar\");\n\n    setTimeout(() => {\n      x.className = x.className.replace(\"show\", \"\");\n\n      setTimeout(() => {\n        toastOpen = false;\n      }, 600);\n    }, 3000);\n  }\n\n  const ReferralRewards = () => {\n    const masterChefContract = useMasterchef();\n    const [data, setData] = useState({});\n\n    useEffect(() => {\n      async function fetchData() {\n        const address = (account || \"0x0000000000000000000000000000000000000000\");\n        const referralsCount = await masterChefContract.methods.referralsCount(address).call();\n        const totalReferralCommissionsBigNumber = new BigNumber(await masterChefContract.methods.totalReferralCommissions(address).call());\n        const totalReferralCommissions = totalReferralCommissionsBigNumber.div(DECIMAL_PLACES).toString();\n\n        setData({\n          referralsCount,\n          totalReferralCommissions\n        });\n      }\n\n      fetchData();\n    }, [masterChefContract]);\n\n    return <ReferralRewardsDiv data={data} />\n  };\n\n  const copyURL = () => {\n    try {\n      navigator.clipboard.writeText(referralURL);\n      ToastPopup(\"Referral URL copied to the clipboard\");\n    } catch (error1) {\n      try {\n        const dummy = document.createElement(\"textarea\");\n        document.body.appendChild(dummy);\n        dummy.value = referralURL;\n        dummy.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(dummy);\n\n        ToastPopup(\"Referral URL copied to the clipboard\");\n      } catch (error2) {\n        ToastPopup(\"Unable to copy to clipboard; please copy URL manually\");\n      }\n    }\n  }\n\n  return (\n    <Page>\n      <Snackbar id=\"snackbar\" onClick={ToastPopupClicked}>{toastMessage}</Snackbar>\n\n      <Hero>\n        <Title>\n          <div>UPWARD</div>\n          <div>Referrals</div>\n        </Title>\n      </Hero>\n\n      {(referralURL === null ?\n        <Content>\n          <Row>View your referral link by connecting a wallet</Row>\n        </Content>\n        :\n        <Content>\n          <Row>Referrals will earn you 1% of all UPWARD that your friends harvest</Row>\n\n          <LeftWrapper>\n            <Row>\n              <Button onClick={copyURL}>COPY</Button>\n              <ReferralLink>{referralURL}</ReferralLink>\n            </Row>\n          </LeftWrapper>\n\n          <ReferralRewards />\n        </Content>\n      )}\n    </Page>\n  )\n};\n"],"sourceRoot":""}